{"version":3,"sources":["register.js"],"names":["$","init","evenList","on","mobile_text","val","trim","checkPhone","mui","toast","ajax","url","type","data","mobile","success","result","meta","status","console","log","attr","time","text","timeId","setInterval","clearInterval","removeAttr","code_text","email_text","pwd_text","pwd2_text","gender_text","length","checkEmail","code","email","pwd","gender","location","href","msg","phone","test","myemail","myReg"],"mappings":"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","sourcesContent":["$(function(){\r\n    init()\r\n\r\n    function init(){\r\n        evenList()\r\n    }\r\n\r\n    function evenList(){\r\n        //绑定验证码获取点击事件\r\n        $(\".get_code_btn\").on(\"tap\",()=>{\r\n         \r\n            let mobile_text=$(\"input[name='mobile']\").val().trim()\r\n            //判断正则表达式\r\n\r\n            if(!checkPhone(mobile_text)){\r\n                //不正确弹框\r\n                mui.toast(\"手机号码有错误\");\r\n                return;\r\n            }\r\n            $.ajax({\r\n                url:  \"http://api.pyg.ak48.xyz/api/public/v1/users/get_reg_code\",\r\n                type:\"post\",\r\n                data:{mobile:mobile_text},\r\n                success:function(result){\r\n                        if(result.meta.status==200){\r\n                            console.log(result)\r\n\r\n                     \r\n                        //成功\r\n                        //禁止按钮\r\n                        $(\".get_code_btn\").attr(\"disabled\",\"disabled\")\r\n                        //开启定时器\r\n                        let time=5;\r\n                        $(\".get_code_btn\").text(`${time}秒后重新获取`);\r\n                        let timeId = setInterval(() => {\r\n                            time--\r\n                            $(\".get_code_btn\").text(`${time}秒后重新获取`);\r\n                            if(time==0){\r\n                                clearInterval(timeId);\r\n                                //修改文字\r\n                                $(\".get_code_btn\").removeAttr(\"disabled\")\r\n                                .text(\"获取验证码\");\r\n                            }\r\n                        }, 1000);\r\n                  }else{\r\n                      console.log('请求失败',result)\r\n                  }\r\n                }\r\n\r\n            })\r\n        })\r\n    }\r\n    //绑定 点击注册 的按钮事情\r\n    $(\".register_btn\").on(\"tap\",function(){\r\n        //获取一堆值\r\n        let mobile_text = $(\"input[name='mobile']\").val().trim();\r\n\r\n        let code_text= $(\"input[name='code']\").val().trim();\r\n\r\n        let email_text = $(\"input[name='email']\").val().trim();\r\n\r\n        let pwd_text = $(\"input[name='pwd']\").val().trim();\r\n\r\n        let pwd2_text = $(\"input[name='pwd2']\").val().trim()\r\n\r\n        let gender_text = $(\"input[name='gender']\").val().trim()\r\n\r\n        //验证每一个\r\n        if(!checkPhone(mobile_text)){\r\n            mui.toast(\"手机号码错误\")\r\n            return;\r\n        }   \r\n        if(code_text.length!=4){\r\n            mui.toast('验证码不合法')\r\n            return;\r\n        }\r\n    \r\n        if(!checkEmail(email_text)){\r\n            mui.toast(\"邮箱不合法\")\r\n            return;\r\n        }\r\n\r\n        if(pwd_text.length<6){\r\n            mui.toast(\"密码格式不对\")\r\n            return;\r\n        }\r\n\r\n        if(pwd2_text !=pwd_text){\r\n            mui.toast('两次密码不一致')\r\n            return;\r\n        }\r\n\r\n        $.ajax({\r\n            url:\"http://api.pyg.ak48.xyz/api/public/v1/users/reg\",\r\n            type:\"post\",\r\n            data:{\r\n                mobile: mobile_text,\r\n                code: code_text,\r\n                email: email_text,\r\n                pwd: pwd_text,\r\n                gender: gender_text\r\n              },\r\n            success:function(result){\r\n                if(result.meta.status==200){\r\n                    mui.toast('注册成功')\r\n                    setInterval(()=>{\r\n                         location.href=\"login.html\";\r\n                    },1000)\r\n\r\n                }else{\r\n                    mui.toast(result.meta.msg)\r\n                }\r\n\r\n            }\r\n        })\r\n\r\n\r\n\r\n\r\n\r\n    })\r\n      // 验证 手机合法性\r\n  function checkPhone(phone) {\r\n    if (!/^1[34578]\\d{9}$/.test(phone)) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n    // 验证 邮箱\r\n    function checkEmail(myemail) {\r\n        var myReg = /^[a-zA-Z0-9_-]+@([a-zA-Z0-9]+\\.)+(com|cn|net|org)$/;\r\n        if (myReg.test(myemail)) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      }\r\n\r\n})"],"file":"register.js"}