{"version":3,"sources":["category.js"],"names":["$","data","location","eventList","sessStr","sessionStorage","getItem","renderLeft","sessobj","JSON","parse","Date","now","time","console","log","renderleft","renderright","ajax","url","type","success","result","meta","status","sessionObj","setItem","stringify","on","addClass","siblings","removeClass","index","html","i","length","temphtml","cat_name","leftScroll","IScroll","item20bj","rightData","children","righthtml","template","arr","rightimg","rightScroll"],"mappings":"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","sourcesContent":["\r\n$(function(){\r\n\r\n    let data;\r\n    // renderLeft()\r\n    location()\r\n    eventList()\r\n  \r\n\r\n    //本地获取数据\r\n    function location() { \r\n        let sessStr = sessionStorage.getItem(\"list\")\r\n        \r\n       \r\n        if(!sessStr){\r\n            renderLeft()\r\n        }else{\r\n             let sessobj=JSON.parse(sessStr)\r\n            if(Date.now()-sessobj.time>50000){\r\n                console.log('重新获取')\r\n            //重新获取数据\r\n            renderLeft()\r\n          }else{\r\n            console.log('存储获取')\r\n            data=sessobj.data\r\n            //左边\r\n            renderleft()\r\n            //右边\r\n            renderright(0);\r\n\r\n          }\r\n\r\n        }\r\n  \r\n     }\r\n  \r\n    //最开始$ajax请求\r\n    function renderLeft(){\r\n        $.ajax({\r\n        url:\"http://api.pyg.ak48.xyz/api/public/v1/categories\",\r\n        type:\"get\",\r\n        success:function(result){\r\n            if(result.meta.status == 200){\r\n               data = result.data\r\n               let sessionObj={data:data,time:Date.now()};\r\n               sessionStorage.setItem(\"list\",JSON.stringify(sessionObj))\r\n               renderright(0);\r\n               renderleft()\r\n             \r\n            }else{\r\n                console.log('失败')\r\n            }\r\n        }\r\n        \r\n    })\r\n    }\r\n\r\n   \r\n\r\n    // 负责 绑定 页面当中的 一坨事件\r\n  function eventList() {  \r\n    // 1 左侧菜单的点击事件  委托 委派\r\n    // touchstart 原生的触屏事件  \r\n\r\n    $(\".left_list \").on(\"tap\",\"li\",function () {\r\n    \r\n      $(this).addClass(\"active\").siblings().removeClass(\"active\");\r\n\r\n      // 获取 被点击的li标签的索引 $(this).index()\r\n      let index=$(this).index();\r\n      renderright(index);\r\n      \r\n    })\r\n  }\r\n    \r\n    //左边\r\n    function renderleft(){\r\n        let html =\"\";\r\n                for(let i = 0;i < data.length ;i++){\r\n                    let temphtml =`\r\n                    <li class=\"${ i==0?'active':''}\">${data[i].cat_name}<li>\r\n                    \r\n                    `;\r\n                    html+=temphtml;\r\n                }\r\n                $(\".left_list\").html(html)\r\n                var leftScroll = new IScroll('.left');\r\n    }\r\n    //右边\r\n    function renderright(index){\r\n        let item20bj = data[index]\r\n        let rightData = item20bj.children\r\n        let righthtml = template(\"rightp1\",{arr:rightData})\r\n        $('.bs-popover-right').html(righthtml);\r\n        //获取要动态渲染的图片长度\r\n        let rightimg=$('.bs-popover-right img').length;\r\n        $('.bs-popover-right img').on('load',function(){\r\n            rightimg--\r\n            if(rightimg===0){\r\n            var rightScroll = new IScroll('.bs-popover-right')\r\n            }\r\n        })\r\n    }\r\n    \r\n})"],"file":"category.js"}